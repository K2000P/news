<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>HTML</title>
		<meta name="description" content="">
		<meta name="author" content="pammi">
		<meta name="viewport" content="width=device-width; initial-scale=1.0">
		<link rel="stylesheet" href="js/jquery.mobile-1.4.5.min.css">
		<link rel="stylesheet" href="news.min.css">
		<link rel="stylesheet" href="jquery.mobile.icons.min.css">
		<link rel="stylesheet" href="js/jquery.mobile.structure-1.4.5.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!--<link rel="stylesheet" href="js/jquerymobile/jquery.mobile-1.4.5.css">-->
		<script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
		<script type="text/javascript" src="jquery.myplugins.js"></script>
		<script type="text/javascript" src="js/jquery-1.11.1.js"></script>
		<script>
			$( document ).bind( "mobileinit", function() {
			 $.mobile.allowCrossDomainPages = true;
		});
		</script>
		<script type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<style>
			#headlines > li,#footer,#header,#header2{
			padding: 10px;
			}
			#ctext{
				float: right;
			}
		</style>
		<script type="text/javascript">

			$(function(){
				var source,newsArr=[];
				var obj,str;
					$("#news li").on("click tap",function(event){
					 source=$(this).attr('id');
					 $("#header2").text("List of top news from : "+$(this).text());
						$("#page2").on("pagebeforeshow",function(){
						$("#headlines").html("");

					var url="https://newsapi.org/v1/articles?source="+source+"&sortBy=top&apiKey=5442ba94308445dab5609ac218fc7cc0";

					$.ajax({
						url:url,
						dataType:'json',
						success:function(data,status){
							console.log(data);
						obj=data.articles;
						$.each(obj,function(i,e){
							var publishDt=e.publishedAt;
						if(publishDt!=null){
						publishDt=publishDt.replace('z','+08:00');
						}
						else{
						publishDt="";
						}
						var dt=new Date(publishDt);
						var str='<li class="list-group-item"><a href="'+e.url+'"><h2 class="list-group-item-heading .bg-primary">'+e.title+'</h2></a><p class="list-group-item-text .bg-info">'+e.author+'  '+dt+'</p><br><h4><small>'+e.description+'</small></h4></li>';
						newsArr.push(str);
						});
						$("#headlines").html("");
						for(var i=0;i<newsArr.length;i++){
						$("#headlines").append($(newsArr[i]));
						$("#headlines").listview("refresh");
						}
						newsArr.length=0;
				}
				});
				});
				event.stopImmediatePropagation();

			});
			});

		</script>


		</head>
		<body>
	-	<div data-role="page" id="page1" data-theme="b">
		<div data-role="header" id="header"  data-theme="b" >Choose your news</div>
		<div data-role="content" class="ui-content" id="content" data-theme="a">
		Available News Sources
		<ul id="news" data-role="listview" data-inset="true" data-filter="true"><li id="bbc-news"><a href="#page2">BBC</a></li><li id="reuters"><a href="#page2">Reuters</a></li><li id="cnbc"><a href="#page2">CNBC</a></li><li id="fortune"><a href="#page2">Fortune</a></li>
			<li id="the-new-york-times"><a href="#page2">The New York Times</a></li><li id="new-scientist"><a href="#page2">New Scientist</a></li><li id="national-geographic"><a href="#page2">National Geographic</a></li><li id="entertainment-weekly"><a href="#page2">Entertainment Weekly</a></li><li id="time"><a href="#page2">Time Magazine</a></li><li id="the-times-of-india"><a href="#page2">The Times of India</a></li><li id="business-insider"><a href="#page2">Business Insider</a></li><li id="google-news"><a href="#page2">Google News</a></li><li id="techradar"><a href="#page2">Tech Radar</a></li>
		</ul>
		</div>
		<div data-role="footer" id="footer">copyright @2017<br></div>
		</div>
		<div data-role="page" id="page2" data-theme="a">
		<div data-role="header" id="header2"   data-theme="b"><a href="#page1" data-theme="a" data-role="button">Back to news list</a></div>
		<div data-role="content" class="ui-content">
			<ul id="headlines" data-role="listview"  data-them="a" data-inset="true" data-filter="true ></ul>
		</div>
		<div data-role="footer" id="footer1"></div>
		</div>
		</body>
		</html>
